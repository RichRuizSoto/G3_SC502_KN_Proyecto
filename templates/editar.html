<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editar Experiencia - Turismo Comunitario</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/layout.css" />
    <link rel="stylesheet" href="/static/css/publicar.css" />
  </head>
  
  <body>
    <div id="header-placeholder"></div>
    <script src="/static/js/header.js"></script>

    <main class="page-content">
      <section class="publish-container">
        <header class="publish-header">
          <h2>✏️ Editar Experiencia Existente</h2>
          <p>
            Modifica los detalles y guarda los cambios para actualizar la
            experiencia de tu comunidad.
          </p>
        </header>

        <form action="/experiencias/{{ e.id_experiencia }}/editar" method="POST" class="publish-form">

          <!-- FIELDSET 1: INFORMACIÓN ESENCIAL -->
          <fieldset class="form-section">
            <legend>Información Básica del Evento</legend>

            <!-- TÍTULO -->
            <div class="form-group">
              <label for="titulo">Título de la Experiencia</label>
              <input type="text" id="titulo" name="titulo" required value="{{ e.titulo }}"/>
            </div>

            <!-- UBICACIÓN -->
            <div class="form-group">
              <label for="ubicacion">Ubicación (Dirección o Punto de Encuentro)</label>
              <input type="text" id="ubicacion" name="ubicacion" required value="{{ e.ubicacion }}"/>

            </div>

            <!-- DESCRIPCIÓN -->
            <div class="form-group full-width">
              <label for="descripcion">Descripción Detallada</label>
              <textarea id="descripcion" name="descripcion" rows="6" required>{{ e.descripcion }}</textarea>
            </div>
            
            <!-- IMAGEN (We add a note here since files cannot be pre-filled) -->
            <div class="form-group full-width">
              <label for="imagen">Imagen Principal</label>
              <input type="file" id="imagen" name="imagen" accept="image/*" />
              <p class="help-text">
                El campo de imagen no se puede prellenar. Solo sube un nuevo archivo si deseas reemplazar la imagen actual.
              </p>
            </div>

          </fieldset>
          
          <!-- FIELDSET 2: DETALLES DE RESERVA -->
          <fieldset class="form-section">
            <legend>Detalles de Reserva y Logística</legend>

            <!-- Grid for small inputs -->
            <div class="form-grid">
              <!-- DURACIÓN -->
              <div class="form-group">
                <label for="duracion">Duración Estimada (Horas)</label>
                <input type="number" id="duracion" name="duracion" min="0.5" step="0.5" required value="{{ e.duracion_horas }}"/>
              </div>

              <!-- CAPACIDAD -->
              <div class="form-group">
                <label for="capacidad">Capacidad Máxima</label>
                <input type="number" id="capacidad" name="capacidad" min="1" required value="{{ e.capacidad_maxima }}"/>
              </div>

              <!-- PRECIO -->
              <div class="form-group">
                <label for="precio">Precio por Persona (USD)</label>
                <input type="number" id="precio" name="precio" min="0" step="0.01" required value="{{ e.precio_por_persona }}"/>
              </div>

              <!-- FECHA DEL EVENTO -->
              <div class="form-group">
                <label for="fecha_evento">Fecha y Hora</label>
                <input type="datetime-local" id="fecha_evento" name="fecha_evento" required
                value="{{ e.fecha_evento.strftime('%Y-%m-%dT%H:%M') if e.fecha_evento else '' }}"/>
              </div>
            </div>
          </fieldset>

          <button type="submit" class="submit-button">
            Guardar Cambios y Actualizar ✅
          </button>
        </form>
      </section>
    </main>

    <div id="footer-placeholder"></div>
    <script src="/static/js/footer.js"></script>
    
  </body>
</html>