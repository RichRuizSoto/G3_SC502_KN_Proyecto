<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Publicar Experiencia - Turismo Comunitario</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/layout.css" />
    <link rel="stylesheet" href="/static/css/publicar.css" />
  </head>
  <body>
    <div id="header-placeholder"></div>
    <script src="/static/js/header.js"></script>

    <main class="page-content">
      <section class="publish-container">
        <header class="publish-header">
          <h2>ðŸŒŸ Crea una Nueva Experiencia</h2>
          <p>
            Ingresa los detalles de la actividad que tu comunidad ofrece a los
            turistas.
          </p>
        </header>

        <form id="publishForm" class="publish-form-alt" enctype="multipart/form-data">
          
          <fieldset class="form-section">
            <legend>InformaciÃ³n BÃ¡sica del Evento</legend>

            <div class="form-group">
              <label for="titulo">TÃ­tulo de la Experiencia</label>
              <input type="text" id="titulo" name="titulo" required placeholder="Ej: Tour del CafÃ© Artesanal y DegustaciÃ³n"/>
            </div>

            <div class="form-group">
              <label for="ubicacion">UbicaciÃ³n (DirecciÃ³n o Punto de Encuentro)</label>
              <input type="text" id="ubicacion" name="ubicacion" required placeholder="Ej: Finca Las Cumbres, San JosÃ©"/>
            </div>

            <div class="form-group full-width">
              <label for="descripcion">DescripciÃ³n Detallada</label>
              <textarea id="descripcion" name="descripcion" rows="6" required placeholder="Describe en detalle quÃ© incluye la experiencia y quÃ© la hace especial."></textarea>
            </div>
            
            <div class="form-group full-width">
              <label for="imagen">Imagen Principal</label>
              <input type="file" id="imagen" name="imagen" accept="image/*" />
              <p class="help-text">Una imagen de alta calidad atrae mÃ¡s reservas.</p>
            </div>

          </fieldset>
          
          <fieldset class="form-section">
            <legend>Detalles de Reserva y LogÃ­stica</legend>

            <div class="form-grid-alt">
              <div class="form-group">
                <label for="duracion">DuraciÃ³n Estimada (Horas)</label>
                <input type="number" id="duracion" name="duracion" min="0.5" step="0.5" required placeholder="3.5"/>
              </div>

              <div class="form-group">
                <label for="capacidad">Capacidad MÃ¡xima</label>
                <input type="number" id="capacidad" name="capacidad" min="1" required placeholder="15"/>
              </div>

              <div class="form-group">
                <label for="precio">Precio por Persona (USD)</label>
                <input type="number" id="precio" name="precio" min="0" step="0.01" required placeholder="25.00"/>
              </div>

              <div class="form-group">
                <label for="fecha_evento">Fecha y Hora</label>
                <input type="datetime-local" id="fecha_evento" name="fecha_evento" required />
              </div>
            </div>
          </fieldset>

          <button type="submit" class="submit-button">
            Publicar Experiencia Ahora ðŸš€
          </button>
        </form>

        <script>
          document.getElementById('publishForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(document.getElementById('publishForm'));
            
            try {
              const response = await fetch('/api/experiencias', {
                method: 'POST',
                body: formData
              });
              
              const data = await response.json();
              
              if (response.ok) {
                alert('Â¡Experiencia publicada exitosamente!');
                window.location.href = '/experiencias';
              } else {
                alert(`Error: ${data.error || 'No se pudo publicar la experiencia'}`);
              }
            } catch (error) {
              alert('Error al publicar: ' + error.message);
            }
          });
        </script>
      </section>
    </main>

    <div id="footer-placeholder"></div>
    <script src="/static/js/footer.js"></script>
  </body>
</html>