<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editar Experiencia - Turismo Comunitario</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/publicar.css" />
  </head>
  
  <body>
    <div id="header-placeholder"></div>
    <script src="js/header.js"></script>

    <main class="page-content">
      <section class="publish-container">
        <header class="publish-header">
          <h2>✏️ Editar Experiencia Existente</h2>
          <p>
            Modifica los detalles y guarda los cambios para actualizar la
            experiencia de tu comunidad.
          </p>
        </header>

        <form action="/api/experiencias/update" method="POST" class="publish-form">
          <!-- Hidden field to identify the experience being edited -->
          <input type="hidden" id="experience_id" name="id" value="exp-12345" />

          <!-- FIELDSET 1: INFORMACIÓN ESENCIAL -->
          <fieldset class="form-section">
            <legend>Información Básica del Evento</legend>

            <!-- TÍTULO -->
            <div class="form-group">
              <label for="titulo">Título de la Experiencia</label>
              <input type="text" id="titulo" name="titulo" required placeholder="Ej: Tour del Café Artesanal y Degustación"/>
            </div>

            <!-- UBICACIÓN -->
            <div class="form-group">
              <label for="ubicacion">Ubicación (Dirección o Punto de Encuentro)</label>
              <input type="text" id="ubicacion" name="ubicacion" required placeholder="Ej: Finca Las Cumbres, San José"/>
            </div>

            <!-- DESCRIPCIÓN -->
            <div class="form-group full-width">
              <label for="descripcion">Descripción Detallada</label>
              <textarea id="descripcion" name="descripcion" rows="6" required placeholder="Describe en detalle qué incluye la experiencia y qué la hace especial."></textarea>
            </div>
            
            <!-- IMAGEN (We add a note here since files cannot be pre-filled) -->
            <div class="form-group full-width">
              <label for="imagen">Imagen Principal</label>
              <input type="file" id="imagen" name="imagen" accept="image/*" />
              <p class="help-text">
                El campo de imagen no se puede prellenar. Solo sube un nuevo archivo si deseas reemplazar la imagen actual.
              </p>
            </div>

          </fieldset>
          
          <!-- FIELDSET 2: DETALLES DE RESERVA -->
          <fieldset class="form-section">
            <legend>Detalles de Reserva y Logística</legend>

            <!-- Grid for small inputs -->
            <div class="form-grid">
              <!-- DURACIÓN -->
              <div class="form-group">
                <label for="duracion">Duración Estimada (Horas)</label>
                <input type="number" id="duracion" name="duracion" min="0.5" step="0.5" required placeholder="3.5"/>
              </div>

              <!-- CAPACIDAD -->
              <div class="form-group">
                <label for="capacidad">Capacidad Máxima</label>
                <input type="number" id="capacidad" name="capacidad" min="1" required placeholder="15"/>
              </div>

              <!-- PRECIO -->
              <div class="form-group">
                <label for="precio">Precio por Persona (USD)</label>
                <input type="number" id="precio" name="precio" min="0" step="0.01" required placeholder="25.00"/>
              </div>

              <!-- FECHA DEL EVENTO -->
              <div class="form-group">
                <label for="fecha_evento">Fecha y Hora</label>
                <input type="datetime-local" id="fecha_evento" name="fecha_evento" required />
              </div>
            </div>
          </fieldset>

          <button type="submit" class="submit-button">
            Guardar Cambios y Actualizar ✅
          </button>
        </form>
      </section>
    </main>

    <div id="footer-placeholder"></div>
    <script src="js/footer.js"></script>

    <script>
      /**
       * SIMULATES LOADING EXISTING EXPERIENCE DATA AND POPULATING THE FORM.
       * In a real application, this data would be fetched from a server (e.g., Firestore)
       * using the experience_id from the URL.
       */
      window.onload = function() {
        // --- Sample Data (Simulated Fetch Result) ---
        const experienceData = {
          titulo: "Edición: Tour Histórico del Cacao",
          ubicacion: "Finca El Paraíso, Limón",
          descripcion: "Una caminata guiada por el proceso del cacao, incluye degustación. Este tour ha sido actualizado para incluir un taller de triturado de semillas.",
          duracion: 4.0,
          capacidad: 12,
          precio: 35.00,
          // Note: datetime-local requires YYYY-MM-DDTHH:MM format
          fecha_evento: "2025-12-15T10:00" 
        };

        // --- Populate Form Fields ---
        document.getElementById('titulo').value = experienceData.titulo;
        document.getElementById('ubicacion').value = experienceData.ubicacion;
        document.getElementById('descripcion').value = experienceData.descripcion;
        document.getElementById('duracion').value = experienceData.duracion;
        document.getElementById('capacidad').value = experienceData.capacidad;
        document.getElementById('precio').value = experienceData.precio;
        document.getElementById('fecha_evento').value = experienceData.fecha_evento;
        
        console.log("Form fields pre-populated for editing.");
      };
    </script>
  </body>
</html>